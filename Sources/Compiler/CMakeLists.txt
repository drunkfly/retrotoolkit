
add(Compiler
    STATIC_LIBRARY
    LIBS
        Common
        RapidXML
        Bas2Tap
        AudioFile
        FuseUtils
        LibSpectrum
        JavaClasspathEmbedded
        ZX0
        ZX7
        LZSA
    DEPENDS
        JavaClasspath
    INSTALL_RESOURCES
        ../Java/Build/RetroBuild.jar
        ../Java/Build/RetroEngine.jar
    SOURCES
        Assembler/AssemblerContext.cpp
        Assembler/AssemblerContext.h
        Assembler/AssemblerContextIf.cpp
        Assembler/AssemblerContextIf.h
        Assembler/AssemblerContextRepeat.cpp
        Assembler/AssemblerContextRepeat.h
        Assembler/AssemblerParser.cpp
        Assembler/AssemblerParser.h
        Assembler/DataDirectives.cpp
        Assembler/DataDirectives.h
        Assembler/Instruction.cpp
        Assembler/Instruction.h
        Assembler/Instructions.Z80.cpp
        Assembler/Instructions.Z80.h
        Assembler/Instructions.Z80.hh
        Assembler/Label.cpp
        Assembler/Label.h
        Assembler/MacroIf.cpp
        Assembler/MacroIf.h
        Assembler/MacroRepeat.cpp
        Assembler/MacroRepeat.h
        Compression/Compression.h
        Compression/Compressor.cpp
        Compression/Compressor.h
        Compression/Lzsa2Compressor.cpp
        Compression/Lzsa2Compressor.h
        Compression/Zx0Compressor.cpp
        Compression/Zx0Compressor.h
        Compression/Zx7Compressor.cpp
        Compression/Zx7Compressor.h
        Java/Natives/drunkfly_Builder.cpp
        Java/Natives/drunkfly_Builder.h
        Java/Natives/drunkfly_internal_BuilderClassLoader.cpp
        Java/Natives/drunkfly_internal_BuilderClassLoader.h
        Java/Natives/drunkfly_Messages.cpp
        Java/Natives/drunkfly_Messages.h
        Java/Exceptions.cpp
        Java/Exceptions.h
        Java/JavaStdClasses.cpp
        Java/JavaStdClasses.h
        Java/JavaStdClasses.lst
        Java/JNI.h
        Java/JNIClassRef.cpp
        Java/JNIClassRef.h
        Java/JNIRef.cpp
        Java/JNIRef.h
        Java/JNIStringRef.cpp
        Java/JNIStringRef.h
        Java/JNIThrowableRef.cpp
        Java/JNIThrowableRef.h
        Java/JStringList.cpp
        Java/JStringList.h
        Java/JVM.cpp
        Java/JVM.h
        Java/JVMGlobalContext.cpp
        Java/JVMGlobalContext.h
        Java/JVMThreadContext.cpp
        Java/JVMThreadContext.h
        Linker/CodeEmitter.cpp
        Linker/CodeEmitter.h
        Linker/CodeEmitterCompressed.cpp
        Linker/CodeEmitterCompressed.h
        Linker/CodeEmitterUncompressed.cpp
        Linker/CodeEmitterUncompressed.h
        Linker/CompiledFile.cpp
        Linker/CompiledFile.h
        Linker/CompiledOutput.cpp
        Linker/CompiledOutput.h
        Linker/DebugInformation.cpp
        Linker/DebugInformation.h
        Linker/ISectionResolver.h
        Linker/Linker.cpp
        Linker/Linker.h
        Linker/Program.cpp
        Linker/Program.h
        Linker/ProgramSection.cpp
        Linker/ProgramSection.h
        Output/LibSpectrum/LibSpectrum.cpp
        Output/LibSpectrum/LibSpectrum.h
        Output/LibSpectrum/LibSpectrumBuffer.cpp
        Output/LibSpectrum/LibSpectrumBuffer.h
        Output/LibSpectrum/LibSpectrumTape.cpp
        Output/LibSpectrum/LibSpectrumTape.h
        Output/LibSpectrum/LibSpectrumTapeBlock.cpp
        Output/LibSpectrum/LibSpectrumTapeBlock.h
        Output/LibSpectrum/VirtualFile.cpp
        Output/LibSpectrum/VirtualFile.h
        Output/IOutputWriter.h
        Output/SpectrumTapeWriter.cpp
        Output/SpectrumTapeWriter.h
        Output/TRDOSWriter.cpp
        Output/TRDOSWriter.h
        Tree/Expr.cpp
        Tree/Expr.h
        Tree/SourceLocation.h
        Tree/Symbol.cpp
        Tree/Symbol.h
        Tree/SymbolTable.cpp
        Tree/SymbolTable.h
        Tree/Value.cpp
        Tree/Value.h
        Compiler.cpp
        Compiler.h
        CompilerError.cpp
        CompilerError.h
        ExpressionParser.cpp
        ExpressionParser.h
        Lexer.cpp
        Lexer.h
        LexerUtils.cpp
        LexerUtils.h
        ParsingContext.cpp
        ParsingContext.h
        Project.cpp
        Project.h
        SourceFile.cpp
        SourceFile.h
        SpectrumBasicCompiler.cpp
        SpectrumBasicCompiler.h
        Token.cpp
        Token.h
    )

set_source_files_properties(
        ../Java/Build/RetroBuild.jar
        ../Java/Build/RetroEngine.jar
    PROPERTIES
        GENERATED TRUE
        HEADER_FILE_ONLY TRUE
    )

target_precompile_headers(Compiler
    REUSE_FROM Common
    )
